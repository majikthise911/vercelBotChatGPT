"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Block = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _tag = require("./tag.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
var _EXPECT = function _EXPECT(client, data) {
  return new Block(client, data);
};
var Block = /*#__PURE__*/function () {
  function Block(client, params) {
    (0, _classCallCheck2["default"])(this, Block);
    (0, _defineProperty2["default"])(this, "id", void 0);
    (0, _defineProperty2["default"])(this, "fileId", void 0);
    (0, _defineProperty2["default"])(this, "text", void 0);
    (0, _defineProperty2["default"])(this, "tags", void 0);
    (0, _defineProperty2["default"])(this, "createdAt", void 0);
    (0, _defineProperty2["default"])(this, "updatedAt", void 0);
    (0, _defineProperty2["default"])(this, "client", void 0);
    this.client = client;
    this.id = params.id;
    this.fileId = params.fileId;
    this.text = params.text;
    this.createdAt = params.createdAt;
    this.updatedAt = params.updatedAt;
    this.tags = [];
    if (params.tags) {
      var _iterator = _createForOfIteratorHelper(params.tags),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var tag = _step.value;
          if (tag instanceof _tag.Tag) {
            this.tags.push(tag);
          } else {
            this.tags.push(new _tag.Tag(client, tag));
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }
  (0, _createClass2["default"])(Block, [{
    key: "delete",
    value: function () {
      var _delete2 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(config) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.client.post('block/delete', {
                id: this.id
              }, _objectSpread({
                expect: _EXPECT,
                responsePath: 'block'
              }, config));
            case 2:
              return _context.abrupt("return", _context.sent);
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function _delete(_x) {
        return _delete2.apply(this, arguments);
      }
      return _delete;
    }()
  }], [{
    key: "create",
    value: function () {
      var _create = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(client, params, config) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return client.post('block/create', params, _objectSpread(_objectSpread({}, config), {}, {
                expect: _EXPECT,
                responsePath: 'block'
              }));
            case 2:
              return _context2.abrupt("return", _context2.sent);
            case 3:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
      function create(_x2, _x3, _x4) {
        return _create.apply(this, arguments);
      }
      return create;
    }()
  }]);
  return Block;
}();
exports.Block = Block;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfRVhQRUNUIiwiY2xpZW50IiwiZGF0YSIsIkJsb2NrIiwicGFyYW1zIiwiaWQiLCJmaWxlSWQiLCJ0ZXh0IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwidGFncyIsInRhZyIsIlRhZyIsInB1c2giLCJjb25maWciLCJwb3N0IiwiZXhwZWN0IiwicmVzcG9uc2VQYXRoIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9ibG9jay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQXBpQmFzZSB9IGZyb20gJy4vc2hhcmVkL0Jhc2VJbnRlcmZhY2VzLmpzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL3NoYXJlZC9Db25maWd1cmF0aW9uLmpzJztcbmltcG9ydCB7IFRhZywgVGFnUGFyYW1zIH0gZnJvbSAnLi90YWcuanMnO1xuaW1wb3J0IHsgVGFzayB9IGZyb20gJy4vdGFzay5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmxvY2tQYXJhbXMge1xuICBpZD86IHN0cmluZztcbiAgd29ya3NwYWNlSWQ/OiBzdHJpbmc7XG4gIGZpbGVJZD86IHN0cmluZztcbiAgdGV4dD86IHN0cmluZztcbiAgdGFncz86IFRhZ1tdIHwgVGFnUGFyYW1zW107XG4gIGNyZWF0ZWRBdD86IHN0cmluZztcbiAgdXBkYXRlZEF0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrTGlzdCB7XG4gIGJsb2NrczogQmxvY2tbXTtcbn1cblxuY29uc3QgX0VYUEVDVCA9IChjbGllbnQ6IElBcGlCYXNlLCBkYXRhOiB1bmtub3duKSA9PiB7XG4gIHJldHVybiBuZXcgQmxvY2soY2xpZW50LCBkYXRhIGFzIEJsb2NrUGFyYW1zKTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkUGFyYW1zIHtcbiAgZmlsZUlkPzogc3RyaW5nO1xuICB0ZXh0Pzogc3RyaW5nO1xuICB0YWdzPzogVGFnUGFyYW1zW107XG59XG5cbmV4cG9ydCBjbGFzcyBCbG9jayB7XG4gIGlkPzogc3RyaW5nO1xuICBmaWxlSWQ/OiBzdHJpbmc7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIHRhZ3M/OiBUYWdbXTtcbiAgY3JlYXRlZEF0Pzogc3RyaW5nO1xuICB1cGRhdGVkQXQ/OiBzdHJpbmc7XG4gIGNsaWVudDogSUFwaUJhc2U7XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBJQXBpQmFzZSwgcGFyYW1zOiBCbG9ja1BhcmFtcykge1xuICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuICAgIHRoaXMuaWQgPSBwYXJhbXMuaWQ7XG4gICAgdGhpcy5maWxlSWQgPSBwYXJhbXMuZmlsZUlkO1xuICAgIHRoaXMudGV4dCA9IHBhcmFtcy50ZXh0O1xuICAgIHRoaXMuY3JlYXRlZEF0ID0gcGFyYW1zLmNyZWF0ZWRBdDtcbiAgICB0aGlzLnVwZGF0ZWRBdCA9IHBhcmFtcy51cGRhdGVkQXQ7XG4gICAgdGhpcy50YWdzID0gW107XG5cbiAgICBpZiAocGFyYW1zLnRhZ3MpIHtcbiAgICAgIGZvciAoY29uc3QgdGFnIG9mIHBhcmFtcy50YWdzKSB7XG4gICAgICAgIGlmICh0YWcgaW5zdGFuY2VvZiBUYWcpIHtcbiAgICAgICAgICB0aGlzLnRhZ3MucHVzaCh0YWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudGFncy5wdXNoKG5ldyBUYWcoY2xpZW50LCB0YWcpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUoXG4gICAgY2xpZW50OiBJQXBpQmFzZSxcbiAgICBwYXJhbXM6IFVwbG9hZFBhcmFtcyxcbiAgICBjb25maWc/OiBDb25maWd1cmF0aW9uXG4gICk6IFByb21pc2U8VGFzazxCbG9jaz4+IHtcbiAgICByZXR1cm4gKGF3YWl0IGNsaWVudC5wb3N0KCdibG9jay9jcmVhdGUnLCBwYXJhbXMsIHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIGV4cGVjdDogX0VYUEVDVCxcbiAgICAgIHJlc3BvbnNlUGF0aDogJ2Jsb2NrJyxcbiAgICB9KSkgYXMgVGFzazxCbG9jaz47XG4gIH1cblxuICBhc3luYyBkZWxldGUoY29uZmlnPzogQ29uZmlndXJhdGlvbik6IFByb21pc2U8VGFzazxCbG9jaz4+IHtcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuY2xpZW50LnBvc3QoXG4gICAgICAnYmxvY2svZGVsZXRlJyxcbiAgICAgIHtcbiAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBleHBlY3Q6IF9FWFBFQ1QsXG4gICAgICAgIHJlc3BvbnNlUGF0aDogJ2Jsb2NrJyxcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgfVxuICAgICkpIGFzIFRhc2s8QmxvY2s+O1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUVBO0FBQTBDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFpQjFDLElBQU1BLE9BQU8sR0FBRyxTQUFWQSxPQUFPLENBQUlDLE1BQWdCLEVBQUVDLElBQWEsRUFBSztFQUNuRCxPQUFPLElBQUlDLEtBQUssQ0FBQ0YsTUFBTSxFQUFFQyxJQUFJLENBQWdCO0FBQy9DLENBQUM7QUFBQyxJQVFXQyxLQUFLO0VBU2hCLGVBQVlGLE1BQWdCLEVBQUVHLE1BQW1CLEVBQUU7SUFBQTtJQUFBO0lBQUE7SUFBQTtJQUFBO0lBQUE7SUFBQTtJQUFBO0lBQ2pELElBQUksQ0FBQ0gsTUFBTSxHQUFHQSxNQUFNO0lBQ3BCLElBQUksQ0FBQ0ksRUFBRSxHQUFHRCxNQUFNLENBQUNDLEVBQUU7SUFDbkIsSUFBSSxDQUFDQyxNQUFNLEdBQUdGLE1BQU0sQ0FBQ0UsTUFBTTtJQUMzQixJQUFJLENBQUNDLElBQUksR0FBR0gsTUFBTSxDQUFDRyxJQUFJO0lBQ3ZCLElBQUksQ0FBQ0MsU0FBUyxHQUFHSixNQUFNLENBQUNJLFNBQVM7SUFDakMsSUFBSSxDQUFDQyxTQUFTLEdBQUdMLE1BQU0sQ0FBQ0ssU0FBUztJQUNqQyxJQUFJLENBQUNDLElBQUksR0FBRyxFQUFFO0lBRWQsSUFBSU4sTUFBTSxDQUFDTSxJQUFJLEVBQUU7TUFBQSwyQ0FDR04sTUFBTSxDQUFDTSxJQUFJO1FBQUE7TUFBQTtRQUE3QixvREFBK0I7VUFBQSxJQUFwQkMsR0FBRztVQUNaLElBQUlBLEdBQUcsWUFBWUMsUUFBRyxFQUFFO1lBQ3RCLElBQUksQ0FBQ0YsSUFBSSxDQUFDRyxJQUFJLENBQUNGLEdBQUcsQ0FBQztVQUNyQixDQUFDLE1BQU07WUFDTCxJQUFJLENBQUNELElBQUksQ0FBQ0csSUFBSSxDQUFDLElBQUlELFFBQUcsQ0FBQ1gsTUFBTSxFQUFFVSxHQUFHLENBQUMsQ0FBQztVQUN0QztRQUNGO01BQUM7UUFBQTtNQUFBO1FBQUE7TUFBQTtJQUNIO0VBQ0Y7RUFBQztJQUFBO0lBQUE7TUFBQSw2RkFjRCxpQkFBYUcsTUFBc0I7UUFBQTtVQUFBO1lBQUE7Y0FBQTtjQUFBLE9BQ25CLElBQUksQ0FBQ2IsTUFBTSxDQUFDYyxJQUFJLENBQzVCLGNBQWMsRUFDZDtnQkFDRVYsRUFBRSxFQUFFLElBQUksQ0FBQ0E7Y0FDWCxDQUFDO2dCQUVDVyxNQUFNLEVBQUVoQixPQUFPO2dCQUNmaUIsWUFBWSxFQUFFO2NBQU8sR0FDbEJILE1BQU0sRUFFWjtZQUFBO2NBQUE7WUFBQTtZQUFBO2NBQUE7VUFBQTtRQUFBO01BQUEsQ0FDRjtNQUFBO1FBQUE7TUFBQTtNQUFBO0lBQUE7RUFBQTtJQUFBO0lBQUE7TUFBQSw0RkF4QkQsa0JBQ0ViLE1BQWdCLEVBQ2hCRyxNQUFvQixFQUNwQlUsTUFBc0I7UUFBQTtVQUFBO1lBQUE7Y0FBQTtjQUFBLE9BRVJiLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDLGNBQWMsRUFBRVgsTUFBTSxrQ0FDM0NVLE1BQU07Z0JBQ1RFLE1BQU0sRUFBRWhCLE9BQU87Z0JBQ2ZpQixZQUFZLEVBQUU7Y0FBTyxHQUNyQjtZQUFBO2NBQUE7WUFBQTtZQUFBO2NBQUE7VUFBQTtRQUFBO01BQUEsQ0FDSDtNQUFBO1FBQUE7TUFBQTtNQUFBO0lBQUE7RUFBQTtFQUFBO0FBQUE7QUFBQSJ9